{% set permission_to_edit = __SELF__.permission_to_edit %}

<div>
    <form data-request="onReturnBack">
        <input type="hidden" name="gallery_id" value="{{ gallery.id }}">
        <button
            type="submit"
            class="btn btn-sm rounded btn-light">
            {{ 'Vissza' | _ }}
        </button>
    </form>
</div>

<h2>{{ gallery.name }}</h2>
<div>
    {{ gallery.description }}
</div>

{% for image in gallery.images %}
<div class="col-12 col-sm-6 col-md-4 col-lg-3 mx-auto">
    <a class="colorbox" data-fancybox="gallery" href="{{ image.path }}" title="{{image.title}}">
        <img src="{{ image.path }}"  class="fr-fic fr-dib p-2 w-100 pe-auto">
    </a>
</div>
{% endfor %}

{% if permission_to_edit %}
<div>
    <div class="text-left">
        <form data-request="onOpenEditForm">
            <input type="hidden" name="gallery_id" value="{{ gallery.id }}">
            <button
                type="submit"
                class="btn btn-sm rounded btn-primary">
                {{ 'Módosít' | _ }}
            </button>
        </form>
    </div>
    <div class="text-right">
        <form data-request="onDeleteGallery">
            <input type="hidden" name="gallery_id" value="{{ gallery.id }}">
            <button
                type="submit"
                class="btn btn-sm rounded btn-danger">
                {{ 'Töröl' | _ }}
            </button>
        </form>
    </div>
</div>
{% endif %}

<div class="row">
    {% for child in childGalleries %}
        {% partial __SELF__ ~ '::galleryCover' gallery=child permision_to_edit=permission_to_edit %}
    {% endfor %}
</div>
{% if permission_to_edit %}
    <div class="row">
        <form data-request="onOpenCreateForm">
            <input type="hidden" name="parent_id" value="{{ gallery.id }}">
            <button
                type="submit"
                class="btn btn-sm rounded btn-primary">
                {{ 'Új galléria' | _ }}
            </button>
        </form>
    </div>
{% endif %}
