{% if level == 1 %}
    {% set childArrayName = 'districts' %}
    {% set noItemsMessage = 'Nincsenek Szövetségek.' %}
    {% set organizationTypeForUrl = 'szovetseg' %}
{% elseif level == 2 %}
    {% set childArrayName = 'teams' %}
    {% set noItemsMessage = 'Nincsenek Körzetek.' %}
    {% set organizationTypeForUrl = 'korzet' %}
{% elseif level == 3 %}
    {% set childArrayName = 'troops' %}
    {% set child2ArrayName = 'patrols' %}
    {% set noItemsMessage = 'Nincsenek Csapatok.' %}
    {% set organizationTypeForUrl = 'csapat' %}
{% elseif level == 4 %}
    {% set childArrayName = 'patrols' %}
    {% set noItemsMessage = 'Nincsenek Rajok.' %}
    {% set organizationTypeForUrl = 'raj' %}
{% elseif level == 5 %}
    {% set noItemsMessage = 'Nincsenek Őrsök.' %}
    {% set organizationTypeForUrl = 'ors' %}
{% endif %}

{% set maxLevel = 3 %}

{% if array | length > 0 %}
    {% for item in array %}
        {% if childArrayName and attribute(item, childArrayName)|length > 0 and level < maxLevel %}
            <li><a class="dropdown-item">{{ item.extendedName }} &#9205;</a>
            <ul class="submenu dropdown-menu bg-primary">
                <li><a class="dropdown-item dropdown-underline" href="{{ url('/') ~ '/' ~ organizationTypeForUrl ~ '/' ~ item.id }}">{{ item.extendedName }}</a>
                {% partial __SELF__ ~ '::menuItems' array=attribute(item, childArrayName) level=level+1 %}
            </ul>
        {% else %}
        <li><a class="dropdown-item" href="{{ url('/') ~ '/' ~ organizationTypeForUrl ~ '/' ~ item.id }}">{{ item.extendedName }}</a>
        {% endif %}
        </li>
    {% endfor %}
{% endif %}
