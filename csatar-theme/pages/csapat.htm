url = "/csapat/:id/:action?"
layout = "default"
title = "Csapat"

[basicForm]
formSlug = "csapat"
recordKeyParam = "id"
recordActionParam = "action"
createRecordKeyword = "letrehozas"
actionUpdateKeyword = "modositas"
actionDeleteKeyword = "torles"

[builderList]
modelClass = "Csatar\Csatar\Models\Troop"
scope = "scopeTeamId"
scopeValue = "{{ :id }}"
displayColumn = "name"
noRecordsMessage = "backend::lang.list.no_records"
detailsPage = "raj"
detailsKeyColumn = "id"
detailsUrlParameter = "id"
pageNumber = "{{ :page }}"

[builderList builderList2]
modelClass = "Csatar\Csatar\Models\Patrol"
scope = "-"
scopeValue = "{{ teamId }}"
displayColumn = "name"
noRecordsMessage = "No records found"
detailsPage = "ors"
detailsKeyColumn = "id"
detailsUrlParameter = "id"
pageNumber = "{{ :page }}"

[viewBag]
localeTitle[en] = "Team"
localeTitle[hu] = "Csapat"
==
<?php
public function onStart() {
    $this['month'] = date('n');

    $team = Csatar\Csatar\Models\Team::getById($this->param('id'));
    $this['team_id'] = $this->param('id');
}
==
<div class="container">
    {% component 'basicForm' %}

    <p>{{ 'Rajok' | _ }}</p>
    {% component 'builderList' %}

    <form action="/raj/letrehozas" method="post">
        <input type="hidden" name="team" value="{{ team_id }}">
        <input type="submit" class="btn btn-default" value="{{ 'Raj hozzáadása' | _ }}">
    </form>

    <p>{{ 'Őrsök' | _ }}</p>
    {% component 'builderList2' %}

    <form action="/ors/letrehozas" method="post">
        <input type="hidden" name="team" value="{{ team_id }}">
        <input type="submit" class="btn btn-default" value="{{ 'Őrs hozzáadása' | _ }}">
    </form>
    
    {% if month == 1 or month == 12 %}
        <p><a href="{{ '/csapatjelentes/' ~ team_id }}" class="btn btn-default">{{ 'Csapatjelentés létrehozása' | _ }}</a></p>
    {% endif %}
</div>
